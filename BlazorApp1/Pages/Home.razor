@page "/"
@using System
@inject NavigationManager NavManager

<PageTitle>Game Collection</PageTitle>

<h1>🎮 게임 모음</h1>

<table class="table">
    <thead>
        <tr>
            <th>게임 제목</th>
            <th>실행</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var game in games)
        {
            <tr>
                <td>@game.Name</td>
                <td><button @onclick="() => StartGame(game.Url)">Play</button></td>
            </tr>
        }
    </tbody>
</table>

@if (!string.IsNullOrEmpty(selectedGame))
{
    <h2>📌 현재 실행 중: @selectedGame</h2>
 <iframe src="@selectedGame" width="400" height="800" style="border: none;"></iframe>


}

@code {
    private List<Game> games = new();
    private string? selectedGame;

    protected override void OnInitialized()
    {
        var baseUri = NavManager.BaseUri.TrimEnd('/');

        games = new()
        {
            new Game { Name = "숫자 맞추기 게임", Url = $"{baseUri}/guessgame" },
            new Game { Name = "테트리스", Url = $"{baseUri}/tetris" },
            new Game { Name = "지렁이 게임", Url = $"{baseUri}/snake" },
        };
    }

    void StartGame(string url)
    {
        selectedGame = url;
    }

    class Game
    {
        public string Name { get; set; } = "";
        public string Url { get; set; } = "";
    }
}


